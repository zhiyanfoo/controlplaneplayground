{
  "server_address": "localhost:18000",
  "resources": [
    {
      "type_url": "type.googleapis.com/envoy.config.listener.v3.Listener",
      "name": "basic_grpc_listener",
      "data": {
        "name": "basic_grpc_listener",
        "address": {
          "socket_address": {
            "protocol": "TCP",
            "address": "0.0.0.0",
            "port_value": 10000
          }
        },
        "filter_chains": [
          {
            "filters": [
              {
                "name": "http-connection-manager",
                "typed_config": {
                  "@type": "type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager",
                  "codec_type": "AUTO",
                  "stat_prefix": "basic_grpc",
                  "rds": {
                    "config_source": {
                      "ads": {},
                      "resource_api_version": "V3",
                      "initial_fetch_timeout": "1s"
                    },
                    "route_config_name": "basic_grpc_route"
                  },
                  "http_filters": [
                    {
                      "name": "http-router",
                      "typed_config": {
                        "@type": "type.googleapis.com/envoy.extensions.filters.http.router.v3.Router"
                      }
                    }
                  ],
                  "access_log": [
                    {
                      "name": "envoy.access_loggers.file",
                      "typed_config": {
                        "@type": "type.googleapis.com/envoy.extensions.access_loggers.file.v3.FileAccessLog",
                        "path": "/dev/stdout",
                        "log_format": {
                          "text_format_source": {
                            "inline_string": "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)% %PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %GRPC_STATUS%(%GRPC_STATUS_NUMBER%) %BYTES_SENT% %DURATION% CTD %CONNECTION_TERMINATION_DETAILS% URAC %UPSTREAM_REQUEST_ATTEMPT_COUNT% DWBS %DOWNSTREAM_WIRE_BYTES_SENT% USWBR %UPSTREAM_WIRE_BYTES_RECEIVED% UTFR %UPSTREAM_TRANSPORT_FAILURE_REASON% UH %UPSTREAM_HOST% UC %UPSTREAM_CLUSTER% GRPC_MSG %RESP(grpc-message)%\n"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        ]
      }
    },
    {
      "type_url": "type.googleapis.com/envoy.config.route.v3.RouteConfiguration",
      "name": "basic_grpc_route",
      "data": {
        "name": "basic_grpc_route",
        "virtual_hosts": [
          {
            "name": "basic_grpc_vhost",
            "domains": ["localhost:10000", "*"],
            "routes": [
              {
                "match": {
                  "prefix": "/"
                },
                "route": {
                  "cluster": "basic_grpc_cluster"
                }
              }
            ]
          }
        ]
      }
    },
    {
      "type_url": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
      "name": "basic_grpc_cluster",
      "wildcard_node_update": true,
      "data": {
        "name": "basic_grpc_cluster",
        "connect_timeout": "5s",
        "type": "EDS",
        "eds_cluster_config": {
          "eds_config": {
            "ads": {},
            "resource_api_version": "V3",
            "initial_fetch_timeout": "1s"
          }
        },
        "lb_policy": "ROUND_ROBIN",
        "typed_extension_protocol_options": {
          "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
            "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
            "explicit_http_config": {
              "http2_protocol_options": {}
            }
          }
        }
      }
    },
    {
      "type_url": "type.googleapis.com/envoy.config.endpoint.v3.ClusterLoadAssignment",
      "name": "basic_grpc_cluster",
      "data": {
        "cluster_name": "basic_grpc_cluster",
        "endpoints": [
          {
            "lb_endpoints": [
              {
                "endpoint": {
                  "address": {
                    "socket_address": {
                      "protocol": "TCP",
                      "address": "172.20.0.30",
                      "port_value": 50051
                    }
                  }
                }
              }
            ]
          }
        ]
      }
    }
  ]
}
