{
  "server_address": "localhost:18000",
  "resources": [
    {
      "type_url": "type.googleapis.com/envoy.config.listener.v3.Listener",
      "name": "odcds_listener_0",
      "data": {
        "name": "odcds_listener_0",
        "address": {
          "socket_address": {
            "protocol": "TCP",
            "address": "0.0.0.0",
            "port_value": 10003
          }
        },
        "filter_chains": [
          {
            "filters": [
              {
                "name": "http-connection-manager",
                "typed_config": {
                  "@type": "type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager",
                  "stat_prefix": "odcds",
                  "rds": {
                    "config_source": {
                      "ads": {},
                      "resource_api_version": "V3",
                      "initial_fetch_timeout": "1s"
                    },
                    "route_config_name": "odcds_route"
                  },
                  "http_filters": [
                    {
                      "name": "envoy.filters.http.on_demand",
                      "typed_config": {
                        "@type": "type.googleapis.com/envoy.extensions.filters.http.on_demand.v3.OnDemand"
                      }
                    },
                    {
                      "name": "http-router",
                      "typed_config": {
                        "@type": "type.googleapis.com/envoy.extensions.filters.http.router.v3.Router"
                      }
                    }
                  ],
                  "access_log": [
                    {
                      "name": "envoy.access_loggers.file",
                      "typed_config": {
                        "@type": "type.googleapis.com/envoy.extensions.access_loggers.file.v3.FileAccessLog",
                        "path": "/dev/stdout",
                        "log_format": {
                          "text_format_source": {
                            "inline_string": "[%START_TIME%] \"%REQ(:METHOD)% %REQ(X-ENVOY-ORIGINAL-PATH?:PATH)% %PROTOCOL%\" %RESPONSE_CODE% %RESPONSE_FLAGS% %BYTES_SENT% %DURATION% %UPSTREAM_HOST% %UPSTREAM_CLUSTER%\n"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        ]
      }
    },
    {
      "type_url": "type.googleapis.com/envoy.config.route.v3.RouteConfiguration",
      "name": "odcds_route",
      "data": {
        "name": "odcds_route",
        "vhds": {
          "config_source": {
            "api_config_source": {
              "api_type": "DELTA_GRPC",
              "transport_api_version": "V3",
              "grpc_services": [
                {
                  "envoy_grpc": {
                    "cluster_name": "xds_cluster"
                  }
                }
              ]
            },
            "resource_api_version": "V3"
          }
        }
      }
    },
    {
      "type_url": "type.googleapis.com/envoy.config.route.v3.VirtualHost",
      "name": "odcds_route/localhost:10003",
      "data": {
        "name": "odcds_route/localhost:10003",
        "domains": ["localhost:10003", "*"],
        "routes": [
          {
            "match": {
              "prefix": "/"
            },
            "route": {
              "cluster": "xdstp:///envoy.config.cluster.v3.Cluster/odcds_test_cluster"
            }
          }
        ],
        "typedPerFilterConfig": {
          "envoy.filters.http.on_demand": {
            "@type": "type.googleapis.com/envoy.extensions.filters.http.on_demand.v3.PerRouteConfig",
            "odcds": {
              "source": {
                "ads": {},
                "resourceApiVersion": "V3"
              },
              "timeout": "1s"
            }
          }
        }
      }
    },
    {
      "type_url": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
      "name": "xdstp:///envoy.config.cluster.v3.Cluster/odcds_test_cluster",
      "data": {
        "name": "xdstp:///envoy.config.cluster.v3.Cluster/odcds_test_cluster",
        "connect_timeout": "5s",
        "type": "EDS",
        "eds_cluster_config": {
          "eds_config": {
            "ads": {},
            "resource_api_version": "V3"
          }
        },
        "lb_policy": "ROUND_ROBIN",
        "typed_extension_protocol_options": {
          "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
            "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
            "explicit_http_config": {
              "http2_protocol_options": {}
            }
          }
        }
      }
    },
    {
      "type_url": "type.googleapis.com/envoy.config.endpoint.v3.ClusterLoadAssignment",
      "name": "xdstp:///envoy.config.cluster.v3.Cluster/odcds_test_cluster",
      "data": {
        "cluster_name": "xdstp:///envoy.config.cluster.v3.Cluster/odcds_test_cluster",
        "endpoints": [
          {
            "lb_endpoints": [
              {
                "endpoint": {
                  "address": {
                    "socket_address": {
                      "protocol": "TCP",
                      "address": "127.0.0.1",
                      "port_value": 50051
                    }
                  }
                }
              }
            ]
          }
        ]
      }
    }
  ]
} 
